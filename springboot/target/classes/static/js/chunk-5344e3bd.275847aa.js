(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5344e3bd"],{"0290":function(r,t,e){"use strict";e.r(t);var s=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("v-card",{staticClass:"mx-auto my-12 outer-card",attrs:{"max-width":"374"}},[e("v-card-title",[e("v-card",{staticClass:"v-header py-2 mx-auto my-n12",attrs:{"max-width":"364",raised:""}},[e("v-card-title",[e("v-row",{staticClass:"color",attrs:{justify:"center"}},[e("h4",[r._v("Login")])])],1),e("v-card-actions",[e("v-row",{staticClass:"color",attrs:{justify:"center"}},[e("v-btn",{attrs:{icon:"",color:"white"}},[e("v-icon",[r._v("mdi-facebook")])],1),e("v-btn",{attrs:{icon:"",color:"white"}},[e("v-icon",[r._v("mdi-twitter")])],1),e("v-btn",{attrs:{icon:"",color:"white"}},[e("v-icon",[r._v("mdi-google-plus")])],1)],1)],1)],1)],1),e("br"),e("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:r.valid,callback:function(t){r.valid=t},expression:"valid"}},[e("v-card-text",{staticClass:"my-4"},[e("v-text-field",{ref:"name",attrs:{rules:[function(){return!!r.name||"必填项"}],"error-messages":r.errorMessages,label:"用户名",required:"","prepend-icon":"mdi-face",color:"purple",clearable:""},model:{value:r.name,callback:function(t){r.name=t},expression:"name"}}),e("v-text-field",{ref:"password",attrs:{rules:[function(){return!!r.password||"必填项"},function(){return!!r.password&&r.password.length<=10||"密码不多于10位"},function(){return!!r.password&&r.password.length>4||"密码不少于5位"}],"error-messages":r.errorMessages,label:"密码",counter:"10",type:"password",required:"","prepend-icon":"mdi-lock-outline",color:"purple",clearable:""},model:{value:r.password,callback:function(t){r.password=t},expression:"password"}}),e("v-card-actions",[e("v-row",{attrs:{justify:"center"}},[e("v-slide-x-reverse-transition",[r.formHasErrors?e("v-tooltip",{attrs:{left:""},scopedSlots:r._u([{key:"activator",fn:function(t){var s=t.on,a=t.attrs;return[e("v-btn",r._g(r._b({staticClass:"my-0",attrs:{icon:""},on:{click:r.resetForm}},"v-btn",a,!1),s),[e("v-icon",[r._v("mdi-refresh")])],1)]}}],null,!1,522373079)},[e("span",[r._v("清空")])]):r._e()],1),e("v-btn",{attrs:{normal:"",text:"",color:"success"},on:{click:r.submit}},[r._v(" 登录 ")]),e("v-btn",{attrs:{normal:"",text:"",href:"/signup",color:"blue"}},[r._v(" 还没有账号？去注册 ")])],1)],1)],1)],1)],1)},a=[],o=(e("4160"),e("b0c0"),e("b64b"),e("159b"),e("5530")),n=e("2f62"),i={name:"LoginVue",data:function(){return{errorMessages:"",name:null,formHasErrors:!1,password:null,userToken:"",valid:!1}},computed:{form:function(){return{name:this.name,password:this.password}}},watch:{name:function(){this.errorMessages=""}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(n["c"])(["changeLogin"])),Object(n["c"])(["setUserName"])),{},{resetForm:function(){var r=this;this.errorMessages=[],this.formHasErrors=!1,Object.keys(this.form).forEach((function(t){r.$refs[t].reset()}))},submit:function(){var r=this;this.formHasErrors=!1,Object.keys(this.form).forEach((function(t){r.form[t]||(r.formHasErrors=!0),r.$refs[t].validate(!0)})),console.log("valid:"+this.valid+", formHasErrors:"+this.formHasErrors),0==this.formHasErrors&&1==this.valid?this.submitForm():alert("请完善信息")},login:function(){var r={user_name:this.name,user_password:this.password};this.$axios.post("http://127.0.0.1:8088/thymeleaf/login",r).then((function(r){var t=r.data;"0"==t?location.href="home":"1"==t?alert("账号密码错误"):console.log("访问失败，data："+t)}))},submitForm:function(){var r=this,t={user_name:this.name,user_password:this.password};this.$axios({method:"post",url:"http://127.0.0.1:8088/thymeleaf/login",data:t}).then((function(e){"error"==e.data?alert("密码或用户名错误"):(r.userToken=e.data.token,console.log("token："+r.userToken),localStorage.setItem("userName",t.user_name),r.changeLogin({Authorization:r.userToken}),alert("登录成功!"),r.$router.push("/home"))})).catch((function(r){console.log("err",r),alert("错误")}))}})},c=i,l=(e("9da6"),e("2877")),u=e("6544"),d=e.n(u),m=e("8336"),f=e("b0af"),v=e("99d9"),h=e("4bd4"),p=e("132d"),b=e("0fd9"),w=e("0789"),g=e("8654"),k=e("3a2f"),_=Object(l["a"])(c,s,a,!1,null,"1c26e902",null);t["default"]=_.exports;d()(_,{VBtn:m["a"],VCard:f["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VForm:h["a"],VIcon:p["a"],VRow:b["a"],VSlideXReverseTransition:w["d"],VTextField:g["a"],VTooltip:k["a"]})},"9da6":function(r,t,e){"use strict";e("a5fe")},a5fe:function(r,t,e){}}]);
//# sourceMappingURL=chunk-5344e3bd.275847aa.js.map